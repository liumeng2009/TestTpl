<ion-view view-title="青青晓园">
  <ion-header-bar class="bar-stable bar-dark">
    <ion-title class="title-left">晓园
      <span ng-if="NewMessageCount>0">({{NewMessageCount}})</span>
      <span ng-if="LoadingServer" >同步中...</span>
    </ion-title>
    <button class="button ion-android-add"></button>
  </ion-header-bar>
  <ion-content>
    <ion-list id="mainlist">
      <div class="item item-divider" style="background-color:#ffeeee;color:#606062;padding-left:20px;height:44px;" ng-if="!isOnline">
        <i class="icon ion-information-circled assertive"></i>
        &nbsp;&nbsp;&nbsp;&nbsp;网络不可用
      </div>
      <ion-item ng-repeat="chat in chats" ng-click="openChatModal('{{chat.userid}}','{{chat.name}}')">
        <!--
        <label ng-if="chat.online" class="">
          <img ng-src="chat.to.image" ng-if="chat.to.image">
          <img ng-src="../../img/avata_128.jpg" ng-if="!chat.to.image">
        </label>
        <label ng-if="!chat.online" class="offline">
          <img ng-src="chat.to.image" ng-if="chat.to.image">
          <img ng-src="../../img/avata_128.jpg" ng-if="!chat.to.image">
        </label>-->
        <label>
          <img ng-src="img/avata_128.jpg">
        </label>
        <div class="new-small" ng-if="chat.new!=0&&chat.new>9"></div>
        <div class="new" ng-if="chat.new!=0&&chat.new<10">{{chat.new | mynum}}</div>
        <div class="right">
          <div class="name">
            {{chat.name}}
            <div class="date" ng-if="chat.createAt!=0">
              {{chat.createAt | mydate}}
            </div>
          </div>
          <p class="content">
            <label style="font-size: 10px;line-height: 20px;color:green" ng-if="chat.type==='sending'">[发送中]</label>
            <label style="font-size: 10px;line-height: 20px;color:red" ng-if="chat.type==='failed'"><i class="icon ion-information-circled assertive"></i></label>
            {{chat.content}}
          </p>
        </div>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
